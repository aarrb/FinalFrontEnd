<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="navbar.css">
        <link rel="stylesheet" href="register.css">
        <title>Register</title>
    </head>
<body>
    <ul class="topnav">
        <li><a class="logo" href="index.html"><img src="../assets/FinalProjectLogo.png" alt="Final Project"></a></li>
        <li class="right"><a href="TrackOrder.html"><img src="../assets/cart.svg" alt="Cart"><span id="cart-count">0</span></a></li>
        <li class="right"><a href="login.html"><img src="../assets/person.svg" alt="Account"></a></li>
        <li class="right"><a href="login.html">Help</a></li>
        <li class="right"><a href="TrackOrder.html">Track Order</a></li>
      </ul>

<form  style="border:1px solid #ccc">
  <div class="container">
    <h1>Sign Up To Save ðŸ˜€</h1>
    <hr>

    <label for="email"><b>Email</b></label>
    <input type="text" placeholder="Enter Email" id="email" required>

    <label for="username"><b>Username</b></label>
    <input type="text"  placeholder="Enter Username" id="username" required>

    <label for="password"><b>Password</b></label>
    <input type="password" placeholder="Enter Password" id="password" required>
    
      
    <p>By creating an account you agree to our <a href="#" style="color:dodgerblue">Terms & Privacy</a>.</p>

    <div class="clearfix">
      <button type="button" onclick="signup()" class="signupbtn">Sign Up</button>
    </div>
  </div>
</form>
<script src="configuration.js"></script>
<script>
async function signup() {
    let email = document.getElementById("email").value;
    let username = document.getElementById("username").value;
    let password = document.getElementById("password").value;
    let customer = {email:email, username: username, password: password}
    let request = {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify(customer)
      };
      try {
        let response = await fetch(getHost() + "/signup", request);
        if(response.status == 200) {  
            alert("The registration was successful!")
            location.href = "login.html";

        } else {
            console.log(`response status:${response.status}`);            
            alert("Something went wrong!");
        }
      }
      catch(error) {
        console.log(error);        
        alert("Something went wrong!");
      }    
}
</script>
</body>
</html>
